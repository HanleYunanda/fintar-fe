<div class="card max-w-xl mx-auto">
    <p-toast></p-toast>

    <div class="mb-6">
        <h1 class="text-2xl font-bold text-slate-800">Change Password</h1>
        <p class="text-slate-500">Update your account security</p>
    </div>

    <form [formGroup]="form" (ngSubmit)="onSubmit()" class="flex flex-col gap-6">
        <div class="flex flex-col gap-2">
            <label for="oldPassword" class="font-medium text-slate-700">Old Password</label>
            <p-password id="oldPassword" formControlName="oldPassword" [feedback]="false" [toggleMask]="true"
                class="w-full" inputclass="w-full"></p-password>
            <small class="text-red-500"
                *ngIf="form.get('oldPassword')?.touched && form.get('oldPassword')?.errors?.['required']">
                Old password is required
            </small>
        </div>

        <div class="flex flex-col gap-2">
            <label for="newPassword" class="font-medium text-slate-700">New Password</label>
            <p-password id="newPassword" formControlName="newPassword" [toggleMask]="true" class="w-full"
                inputclass="w-full"></p-password>
            <small class="text-red-500"
                *ngIf="form.get('newPassword')?.touched && form.get('newPassword')?.errors?.['required']">
                New password is required
            </small>
            <small class="text-red-500"
                *ngIf="form.get('newPassword')?.touched && form.get('newPassword')?.errors?.['pattern']">
                Password must be at least 8 characters with 1 uppercase, 1 lowercase, and 1 digit
            </small>
        </div>

        <div class="flex flex-col gap-2">
            <label for="confirmPassword" class="font-medium text-slate-700">Confirm New Password</label>
            <p-password id="confirmPassword" formControlName="confirmPassword" [feedback]="false" [toggleMask]="true"
                class="w-full" inputclass="w-full"></p-password>
            <small class="text-red-500"
                *ngIf="form.get('confirmPassword')?.touched && form.get('confirmPassword')?.errors?.['required']">
                Please confirm your new password
            </small>
            <small class="text-red-500"
                *ngIf="form.get('confirmPassword')?.touched && form.get('confirmPassword')?.errors?.['passwordMismatch']">
                Passwords do not match
            </small>
        </div>

        <div class="flex justify-end gap-3 mt-4">
            <p-button label="Cancel" icon="pi pi-times" [outlined]="true" severity="secondary" type="button"
                routerLink="/profile"></p-button>
            <p-button label="Change Password" icon="pi pi-check" type="submit" [loading]="loading()"></p-button>
        </div>
    </form>
</div>